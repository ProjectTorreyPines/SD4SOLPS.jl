<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SD4SOLPS.jl · SD4SOLPS</title><meta name="title" content="SD4SOLPS.jl · SD4SOLPS"/><meta property="og:title" content="SD4SOLPS.jl · SD4SOLPS"/><meta property="twitter:title" content="SD4SOLPS.jl · SD4SOLPS"/><meta name="description" content="Documentation for SD4SOLPS."/><meta property="og:description" content="Documentation for SD4SOLPS."/><meta property="twitter:description" content="Documentation for SD4SOLPS."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>SD4SOLPS</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>SD4SOLPS.jl</a><ul class="internal"><li><a class="tocitem" href="#Documentation-of-other-repositories-in-this-project"><span>Documentation of other repositories in this project</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Top-file-handling-functions"><span>Top file handling functions</span></a></li><li><a class="tocitem" href="#Repairing/filling-out-partial-equilibrium-files"><span>Repairing/filling out partial equilibrium files</span></a></li><li><a class="tocitem" href="#Extrapolations"><span>Extrapolations</span></a></li><li><a class="tocitem" href="#Unit-conversion-utilities"><span>Unit conversion utilities</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>SD4SOLPS.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SD4SOLPS.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="SD4SOLPS.jl"><a class="docs-heading-anchor" href="#SD4SOLPS.jl">SD4SOLPS.jl</a><a id="SD4SOLPS.jl-1"></a><a class="docs-heading-anchor-permalink" href="#SD4SOLPS.jl" title="Permalink"></a></h1><ul><li><a href="#SD4SOLPS.jl">SD4SOLPS.jl</a></li><li class="no-marker"><ul><li><a href="#Documentation-of-other-repositories-in-this-project">Documentation of other repositories in this project</a></li><li class="no-marker"><ul><li><a href="#[GGDUtils.jl](https://projecttorreypines.github.io/GGDUtils.jl/stable)">GGDUtils.jl</a></li><li><a href="#[SOLPS2IMAS.jl](https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable)">SOLPS2IMAS.jl</a></li><li><a href="#[SynthDiag.jl](https://projecttorreypines.github.io/SynthDiag.jl/stable)">SynthDiag.jl</a></li></ul></li><li><a href="#Installation">Installation</a></li><li class="no-marker"><ul><li><a href="#Using-make:">Using make:</a></li><li><a href="#Using-Julia-REPL-and-installing-using-Github-url">Using Julia REPL and installing using Github url</a></li></ul></li><li><a href="#Top-file-handling-functions">Top file handling functions</a></li><li><a href="#Repairing/filling-out-partial-equilibrium-files">Repairing/filling out partial equilibrium files</a></li><li><a href="#Extrapolations">Extrapolations</a></li><li class="no-marker"><ul><li><a href="#Core-profile-extrapolations">Core profile extrapolations</a></li><li><a href="#Edge-profiles-extrapolations">Edge profiles extrapolations</a></li></ul></li><li><a href="#Unit-conversion-utilities">Unit conversion utilities</a></li></ul></li></ul><p>This repository serves as the top most workflow manager with helpful utilities to use other repositories in this project.</p><h2 id="Documentation-of-other-repositories-in-this-project"><a class="docs-heading-anchor" href="#Documentation-of-other-repositories-in-this-project">Documentation of other repositories in this project</a><a id="Documentation-of-other-repositories-in-this-project-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-of-other-repositories-in-this-project" title="Permalink"></a></h2><h3 id="[GGDUtils.jl](https://projecttorreypines.github.io/GGDUtils.jl/stable)"><a class="docs-heading-anchor" href="#[GGDUtils.jl](https://projecttorreypines.github.io/GGDUtils.jl/stable)"><a href="https://projecttorreypines.github.io/GGDUtils.jl/stable">GGDUtils.jl</a></a><a id="[GGDUtils.jl](https://projecttorreypines.github.io/GGDUtils.jl/stable)-1"></a><a class="docs-heading-anchor-permalink" href="#[GGDUtils.jl](https://projecttorreypines.github.io/GGDUtils.jl/stable)" title="Permalink"></a></h3><h3 id="[SOLPS2IMAS.jl](https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable)"><a class="docs-heading-anchor" href="#[SOLPS2IMAS.jl](https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable)"><a href="https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable">SOLPS2IMAS.jl</a></a><a id="[SOLPS2IMAS.jl](https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable)-1"></a><a class="docs-heading-anchor-permalink" href="#[SOLPS2IMAS.jl](https://projecttorreypines.github.io/SOLPS2IMAS.jl/stable)" title="Permalink"></a></h3><h3 id="[SynthDiag.jl](https://projecttorreypines.github.io/SynthDiag.jl/stable)"><a class="docs-heading-anchor" href="#[SynthDiag.jl](https://projecttorreypines.github.io/SynthDiag.jl/stable)"><a href="https://projecttorreypines.github.io/SynthDiag.jl/stable">SynthDiag.jl</a></a><a id="[SynthDiag.jl](https://projecttorreypines.github.io/SynthDiag.jl/stable)-1"></a><a class="docs-heading-anchor-permalink" href="#[SynthDiag.jl](https://projecttorreypines.github.io/SynthDiag.jl/stable)" title="Permalink"></a></h3><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="Using-make:"><a class="docs-heading-anchor" href="#Using-make:">Using make:</a><a id="Using-make:-1"></a><a class="docs-heading-anchor-permalink" href="#Using-make:" title="Permalink"></a></h3><p>After cloning this repo, check the make menu:</p><pre><code class="nohighlight hljs">SD4SOLPS.jl % make help
Help Menu

make env_with_cloned_repo (or make r): Creates a Julia environment with the cloned repositories
make env_with_git_url (or make u): Creates a Julia environment with the git urls without creating local clones
make clean: Deletes Project.toml and Manifest.toml for a fresh start</code></pre><h4 id="make-r"><a class="docs-heading-anchor" href="#make-r">make r</a><a id="make-r-1"></a><a class="docs-heading-anchor-permalink" href="#make-r" title="Permalink"></a></h4><p>This option creates local copies of required private repositories at the same level as current repository and uses them in develop mode to create a Manifest.toml</p><h4 id="make-u"><a class="docs-heading-anchor" href="#make-u">make u</a><a id="make-u-1"></a><a class="docs-heading-anchor-permalink" href="#make-u" title="Permalink"></a></h4><p>This option uses url of required private repositories to create a static Manifest.toml attached to current master branches of these repositories.</p><h4 id="make-clean"><a class="docs-heading-anchor" href="#make-clean">make clean</a><a id="make-clean-1"></a><a class="docs-heading-anchor-permalink" href="#make-clean" title="Permalink"></a></h4><p>Deletes Manifest.toml so that environment can be recreated, to update or change the last used method.</p><h3 id="Using-Julia-REPL-and-installing-using-Github-url"><a class="docs-heading-anchor" href="#Using-Julia-REPL-and-installing-using-Github-url">Using Julia REPL and installing using Github url</a><a id="Using-Julia-REPL-and-installing-using-Github-url-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Julia-REPL-and-installing-using-Github-url" title="Permalink"></a></h3><pre><code class="language-julia hljs">julia&gt; using Pkg;
julia&gt; Pkg.add(; url=&quot;https://github.com/ProjectTorreyPines/IMASDD.jl.git&quot;);
julia&gt; Pkg.add(; url=&quot;https://github.com/ProjectTorreyPines/GGDUtils.jl.git&quot;);
julia&gt; Pkg.add(; url=&quot;https://github.com/ProjectTorreyPines/SOLPS2IMAS.jl.git&quot;);
julia&gt; Pkg.add(; url=&quot;https://github.com/JuliaFusion/EFIT.jl.git&quot;);
julia&gt; Pkg.add(; url=&quot;https://github.com/ProjectTorreyPines/SD4SOLPS.jl.git&quot;);
julia&gt; Pkg.instantiate()</code></pre><p>You might have to use ssh url instead of https. In that case, replace <code>https://github.com</code> with <code>git@github.com:</code>.</p><h2 id="Top-file-handling-functions"><a class="docs-heading-anchor" href="#Top-file-handling-functions">Top file handling functions</a><a id="Top-file-handling-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Top-file-handling-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.find_files_in_allowed_folders" href="#SD4SOLPS.find_files_in_allowed_folders"><code>SD4SOLPS.find_files_in_allowed_folders</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">find_files_in_allowed_folders(
    input_dirs::String...;
    eqdsk_file::String,
    recursive::Bool=true,
)</code></pre><p>Searches a list of allowed folders for a set of filenames that will provide information about the SOLPS case. Returns a list of filenames with complete paths.</p><p>Example:</p><pre><code class="language-julia hljs">SD4SOLPS.find_files_in_allowed_folders(
    &quot;&lt;your samples folder&gt;/D3D_Ma_184833_03600&quot;;
    eqdsk_file=&quot;g184833.03600&quot;,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/SD4SOLPS.jl#L14-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.geqdsk_to_imas!" href="#SD4SOLPS.geqdsk_to_imas!"><code>SD4SOLPS.geqdsk_to_imas!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">geqdsk_to_imas!(
    eqdsk_file::String,
    dd::IMASDD.dd;
    set_time::Union{Nothing, Float64}=nothing,
    time_index::Int=1,
)</code></pre><p>Transfers the equilibrium reconstruction from an EFIT-style gEQDSK file into the IMAS DD structure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/SD4SOLPS.jl#L67-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.preparation" href="#SD4SOLPS.preparation"><code>SD4SOLPS.preparation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">preparation(
    eqdsk_file::String,
    dirs::String...;
    core_method::String=&quot;simple&quot;,
    filename::String=&quot;sd_input_data&quot;,
    output_format::String=&quot;json&quot;,
    eqdsk_set_time::Union{Nothing, Float64}=nothing,
    eq_time_index::Int64=1,
)::IMASDD.dd</code></pre><p>Gathers SOLPS and EFIT files and loads them into IMAS structure. Extrapolates profiles as needed to get a complete picture.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/SD4SOLPS.jl#L193-L206">source</a></section></article><h2 id="Repairing/filling-out-partial-equilibrium-files"><a class="docs-heading-anchor" href="#Repairing/filling-out-partial-equilibrium-files">Repairing/filling out partial equilibrium files</a><a id="Repairing/filling-out-partial-equilibrium-files-1"></a><a class="docs-heading-anchor-permalink" href="#Repairing/filling-out-partial-equilibrium-files" title="Permalink"></a></h2><p>Tools for repairing/filling out partial equilibrium files.</p><p>Some of the added fields may not be totally accurate, so it is recommended to use this tool mainly for test cases, as a utility. For a real equilibrium, problems should be fixed properly.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.add_rho_to_equilibrium!" href="#SD4SOLPS.add_rho_to_equilibrium!"><code>SD4SOLPS.add_rho_to_equilibrium!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function add_rho_to_equilibrium(dd:IMASDD.dd)</code></pre><p>Adds equilibrium rho profile to the DD</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/repair_eq.jl#L58-L62">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.check_rho_1d" href="#SD4SOLPS.check_rho_1d"><code>SD4SOLPS.check_rho_1d</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">check_rho_1d(
    dd::IMASDD.dd;
    time_slice::Int64=1,
    throw_on_fail::Bool=false,
)::Bool</code></pre><p>Checks to see if rho exists and is valid in the equilibrium 1d profiles</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/repair_eq.jl#L15-L23">source</a></section></article><h2 id="Extrapolations"><a class="docs-heading-anchor" href="#Extrapolations">Extrapolations</a><a id="Extrapolations-1"></a><a class="docs-heading-anchor-permalink" href="#Extrapolations" title="Permalink"></a></h2><p>Utilities for extrapolating profiles</p><h3 id="Core-profile-extrapolations"><a class="docs-heading-anchor" href="#Core-profile-extrapolations">Core profile extrapolations</a><a id="Core-profile-extrapolations-1"></a><a class="docs-heading-anchor-permalink" href="#Core-profile-extrapolations" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.extrapolate_core" href="#SD4SOLPS.extrapolate_core"><code>SD4SOLPS.extrapolate_core</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">extrapolate_core(
    edge_rho::Vector{Float64},
    edge_quantity::Vector{Float64},
    rho_output::Vector{Float64},
)::Vector{Float64}</code></pre><p>Function for assuming a core profile when given edge profile data.</p><p>Concept:</p><ol><li>value and derivative should be continuous when joining real data</li><li>derivative at magnetic axis is known to be 0 when making profile vs. rho, by the definition of rho</li><li>derivative probably does something fancier between the pedestal and axis than just linear interpolation, so add an extra point in there</li><li>there&#39;s a joint between the steep pedestal and the shallow core that needs an extra knot to manage it properly</li><li>after making up a very simple gradient profile out of a few line segments, integrate it to get the profile of the quantity in question</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/supersize_profile.jl#L43-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.fill_in_extrapolated_core_profile!" href="#SD4SOLPS.fill_in_extrapolated_core_profile!"><code>SD4SOLPS.fill_in_extrapolated_core_profile!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fill_in_extrapolated_core_profile!(
    dd::IMASDD.dd,
    quantity_name::String;
    method::String=&quot;simple&quot;,
    eq_time_idx::Int64=1,
    eq_profiles_2d_idx::Int64=1,
    grid_ggd_idx::Int64=1,
    space_idx::Int64=1,
)</code></pre><p>This function accepts a DD that should be populated with <code>equilibrium</code> and <code>edge_profiles</code> as well as a request for a quantity to extrapolate into the core. It then maps <code>edge_profiles</code> data to rho, calls the function that performs the extrapolation (which is not a simple linear extrapolation but has some trickery to attempt to make a somewhat convincing profile shape), and writes the result to core_profiles. This involves a bunch of interpolations and stuff.</p><p>Input arguments:</p><ul><li><code>dd</code>: an IMAS data dictionary</li><li><code>quantity_name</code>: the name of a quantity in <code>edge_profiles.profiles_2d</code> and <code>core_profiles.profiles_1d</code>, such as &quot;electrons.density&quot;</li><li><code>method</code>: Extrapolation method.</li><li><code>eq_time_id</code>x: index of the equilibrium time slice to use. For a typical SOLPS run, the SOLPS mesh will be based on the equilibrium reconstruction at a single time, so the DD associated with the SOLPS run only needs one equilibrium time slice to be loaded. However, one could combine the complete equilibrium time series with the SOLPS run and then have to specify which slice of the equilibrium corresponds to the SOLPS mesh.</li><li><code>eq_profiles_2d_idx</code>: index of the <code>profiles_2D</code> in equilibrium <code>time_slice</code>.</li><li><code>grid_ggd_idx</code>: index of the <code>grid_ggd</code> to use. For a typical SOLPS run, the SOLPS grid is fixed, so this index defaults to 1. But in future, if a time varying grid is used, then this index will need to be specified.</li><li><code>space_id</code>x: index of the space to use. For a typical SOLPS run, there will be only one space so this index will mostly remain at 1.</li><li><code>cell_subset_idx</code>: index of the subset of cells to use for the extrapolation. The default is 5, which is the subset of all cells. If <code>edge_profiles</code> data is instead present for a different subset, for instance, -5, which are b2.5 cells only, then this index should be set to -5.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/supersize_profile.jl#L104-L144">source</a></section></article><h3 id="Edge-profiles-extrapolations"><a class="docs-heading-anchor" href="#Edge-profiles-extrapolations">Edge profiles extrapolations</a><a id="Edge-profiles-extrapolations-1"></a><a class="docs-heading-anchor-permalink" href="#Edge-profiles-extrapolations" title="Permalink"></a></h3><p>These functions have not been fully tested and/or supported yet.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.mesh_psi_spacing" href="#SD4SOLPS.mesh_psi_spacing"><code>SD4SOLPS.mesh_psi_spacing</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mesh_psi_spacing(
    dd::IMASDD.dd;
    eq_time_idx::Int64=1,
    eq_profiles_2d_idx::Int64=1,
    grid_ggd_idx::Int64=1,
    space_idx::Int64=1,
    avoid_guard_cell::Bool=true,
    spacing_rule=&quot;mean&quot;,
)</code></pre><p>Inspects the mesh to see how far apart faces are in psi_N. Requires that GGD and equilibrium are populated.</p><p>Input Arguments:</p><ul><li><code>dd</code>: a data dictionary instance with required data loaded into it</li><li><code>eq_time_idx</code>: index of the equilibrium time slice to use. For a typical SOLPS run, the SOLPS mesh will be based on the equilibrium reconstruction at a single time, so the DD associated with the SOLPS run only needs one equilibrium time slice to be loaded. However, one could combine the complete equilibrium time series with the SOLPS run and then have to specify which slice of the equilibrium corresponds to the SOLPS mesh.</li><li><code>eq_profiles_2d_id</code>x: index of the <code>profiles_2D</code> in equilibrium <code>time_slice</code>.</li><li><code>grid_ggd_idx</code>: index of the <code>grid_ggd</code> to use. For a typical SOLPS run, the SOLPS grid is fixed, so this index defaults to 1. But in future, if a time varying grid is used, then this index will need to be specified.</li><li><code>space_idx</code>: index of the space to use. For a typical SOLPS run, there will be only one space so this index will mostly remain at 1.</li><li><code>avoid_guard_cell</code>: assume that the last cell is a guard cell so take <code>end-2</code> and <code>end-1</code> instead of <code>end</code> and <code>end-1</code></li><li><code>spacing_rule</code>: &quot;edge&quot; or &quot;mean&quot; to make spacing of new cells (in <code>psi_N</code>) be the same as the spacing at the edge of the mesh, or the same as the average spacing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/supersize_profile.jl#L332-L365">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.cached_mesh_extension!" href="#SD4SOLPS.cached_mesh_extension!"><code>SD4SOLPS.cached_mesh_extension!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cached_mesh_extension!(
    dd::IMASDD.dd,
    eqdsk_file::String,
    b2fgmtry::String;
    eq_time_idx::Int64=1,
    eq_profiles_2d_idx::Int64=1,
    grid_ggd_idx::Int64=1,
    space_idx::Int64=1,
    clear_cache::Bool=false,
)::String</code></pre><p>Adds an extended mesh to a data dictionary, possibly from a cached result.</p><p>Input Arguments:</p><ul><li><code>dd</code>: The data dictionary. It will be modified in place.</li><li><code>eqdsk_file</code>: the name of the EQDSK file that was used to get equilibrium data in the dd.</li><li><code>b2fgmtry</code>: the name of the SOLPS geometry file that was used to get GGD info in <code>edge_profiles</code> in the dd.</li><li><code>eq_time_idx</code>: Index of the time slice in equilibrium</li><li><code>eq_profiles_2d_idx</code>: Index of the 2D profile set in equilibrium (there is usually only one)</li><li><code>grid_ggd_idx</code>: Index of the <code>grid_ggd</code> set in edge_profiles</li><li><code>space_idx</code>: Index of the space</li><li><code>clear_cache</code>: delete any existing cache file (for use in testing)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/supersize_profile.jl#L900-L927">source</a></section></article><h2 id="Unit-conversion-utilities"><a class="docs-heading-anchor" href="#Unit-conversion-utilities">Unit conversion utilities</a><a id="Unit-conversion-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-conversion-utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SD4SOLPS.gas_unit_converter" href="#SD4SOLPS.gas_unit_converter"><code>SD4SOLPS.gas_unit_converter</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gas_unit_converter(
    value_in::Float64,
    units_in::String,
    units_out::String;
    species::String=&quot;H&quot;,
    temperature::Float64=293.15,
)</code></pre><p>Converts gas flows between different units. Uses ideal gas law to convert between Pressure * volume type flows / quantities and count / current types of units. There is a version that accepts floats in and outputs floats, and another that deals in Unitful quantities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/unit_utils.jl#L28-L41">source</a></section><section><div><pre><code class="language-julia hljs">gas_unit_converter(
    value_in::Unitful.Quantity,
    units_in::String,
    units_out::String;
    species::String=&quot;H&quot;,
    temperature=293.15 * Unitful.K,
)</code></pre><p>Converts gas flows between different units. Uses ideal gas law to convert between Pressure * volume type flows / quantities and count / current types of units. This is the Unitful version.</p><p>Output will be unitful, but the units are not simplified automatically. You can perform operations such as</p><ul><li><code>(output |&gt; Unitful.upreferred).val</code></li><li><code>Unitful.uconvert(Unitful.whatever, output).val</code></li></ul><p>to handle simplification or conversion of units.</p><p>Although this function pretends torr L s<span>$^{-1}$</span> and Pa m<span>$^3$</span> s<span>$^{-1}$</span> are different, use of Unitful should cause them to behave the same way as long as you simplify or convert units at the end. This means that you can use other pressure*volume type gas units and call them torr L s<span>$^{-1}$</span> and the script will deal with them up to having messy units in the output.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/SD4SOLPS.jl/blob/329f0cf1c1024999db9cbe7ce48b328b6a49b962/src/unit_utils.jl#L85-L111">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Thursday 9 May 2024 22:32">Thursday 9 May 2024</span>. Using Julia version 1.10.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
